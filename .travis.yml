language: java
jdk:
- openjdk8
services:
  - docker 
install:
- mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V

script:
- mvn test install

after_success:
- docker --version
- pip install --user awscli
- export PATH=$PATH:$HOME/.local/bin
- eval $(aws ecr get-login --region us-east-2
- docker tag vehicle-status-app/vsa:latest 637449251545.dkr.ecr.us-east-2.amazonaws.com/vehicle-status-app:latest
- docker push 637449251545.dkr.ecr.us-east-2.amazonaws.com/vehicle-status-app:latest
